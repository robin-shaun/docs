---
title: 管理知识库
---

## 管理知识库中的文档

### 添加文档

知识库是文档的集合。文档支持本地上传，或导入其它在线数据源。知识库内的文档对应数据源中的一个文件单位，例如 Notion 库内的一篇文档或新的在线文档网页。

点击“知识库” → “文档列表” → “添加文件”，在已创建的知识库内上传新的文档。

![在知识库内上传新文档](https://assets-docs.dify.ai/2024/12/424ab491aaebe09b490a36d26c9fa8da.png)

### 启用 / 禁用 / 归档 / 删除文档

**启用**：处于正常使用状态的文档，支持编辑内容与被知识库检索。对于已被禁用的文档，允许重新启用。已归档的文档需撤销归档状态后才能重新启用。

**禁用**：对于不希望在使用 AI 应用时被检索的文档，可以关闭文档右侧的蓝色开关按钮以禁用文档。禁用文档后，仍然可以编辑当前内容。

**归档**：对于一些不再使用的旧文档数据，如果不想删除可以将其归档。归档后的数据就只能查看或删除，无法重新编辑。你可以在知识库文档列表，点击归档按钮；或在文档详情页内进行归档。**归档操作支持撤销。**

**删除**：⚠️ 危险操作。对于一些错误文档或明显有歧义的内容，可以点击文档右侧菜单按钮中的删除。删除后的内容将无法被找回，请进行谨慎操作。

> 以上选项均支持选中多个文档后批量操作。

![禁用或归档文档](https://assets-docs.dify.ai/2024/12/5e0e64859a1ac51602d167ec55ef9350.png)

### 注意事项

* 对于 Sandbox/Free 版本用户，未使用知识库的将在 **7 天** 后自动禁用；
* 对于 Professional/Team 版本用户，未使用知识库的将在 **30 天** 后自动禁用。

![一键恢复被禁用的文档](https://assets-docs.dify.ai/2024/12/bf6485b17aec716741eb65e307c2274c.png)

***

## 管理文本分段

### 查看文本分段

知识库内已上传的每个文档都会以文本分段（Chunks）形式进行存储。点击文档标题，在详情页中查看当前文档的分段列表，每页默认展示 10 个区块，你可以在网页底部调整每页的展示数量。

每个内容区块展示前 2 行的预览内容。若需要查看更加分段内的完整内容，轻点“展开分段”按钮即可查看。

![展开内容分段](https://assets-docs.dify.ai/2024/12/86cc80f17fab1eea75aa73ee681e4663.png)

你可以通过筛选栏快速查看所有已启用 / 未启用的文档。

![筛选文档分段](https://assets-docs.dify.ai/2025/01/47ef07319175a102bfd1692dcc6cac9b.png)

***

### 检查分段质量

文档分段对于知识库应用的问答效果有明显影响，在将知识库与应用关联之前，建议人工检查分段质量。

检查分段质量时，一般需要关注以下几种情况：

* **过短的文本分段**，导致语义缺失；
* **过长的文本分段**，导致语义噪音影响匹配准确性；
* **明显的语义截断**，在使用最大分段长度限制时会出现强制性的语义截断，导致召回时缺失内容；

![分段质量检查示例](https://assets-docs.dify.ai/2024/12/ee081e98c1649aea4a5c2b15b88e11aa.png)
![分段质量检查示例](https://assets-docs.dify.ai/2024/12/ac47381ae4be183768dd025c37c049fa.png)
![分段质量检查示例](https://assets-docs.dify.ai/2024/12/b8ab7ac84028b0b16c3948f35015e069.png)

***

### 添加文本分段

知识库中的文档支持单独添加文本分段，不同的分段模式对应不同的分段添加方法。

<Card title="添加文本分段" icon="info" href="#"> 
添加文本分段为付费功能，请前往[此处](https://dify.ai/pricing)升级账号以使用功能。
</Card>

<Tabs>
  <Tab title="通用模式">
    点击分段列表顶部的“添加分段”按钮，可以在文档内自行添加一个或批量添加多个自定义分段。
    
    ![通用模式 - 添加分段](https://assets-docs.dify.ai/2024/12/552ff4ab9e77130ad09aaef878b19cc9.png)
  </Tab>
  <Tab title="父子模式">
    点击分段列表顶部的「 添加分段 」按钮，可以在文档内自行添加一个或批量添加多个自定义**父分段。**
    
    ![父子模式 — 添加分区](https://assets-docs.dify.ai/2024/12/ed4be3bf178e3a41d53bcc10255ad3b2.png)
    
    填写内容后，勾选尾部“连续新增”钮后，可以继续添加文本。
  </Tab>
</Tabs>

***

### 编辑文本分段

<Tabs>
  <Tab title="通用模式">
    你可以对已添加的分段内容直接进行编辑或修改，包括修改分段内的文本内容或关键词。
    
    ![编辑文档分段](https://assets-docs.dify.ai/2024/12/8220e412e4c5a2bf729fb5dfcc1b7f4c.png)
  </Tab>
  <Tab title="父子模式">
    父分段包含其本身所包含的子分段内容，两者相互独立。你可以单独修改父分段或子分段的内容。
    
    ![修改父分段](https://assets-docs.dify.ai/2024/12/7eedfee59a3c978cc4a29d9cf06fbbcc.png)
    
    修改父分段后，点击 **“保存”** 后将不会影响子分段的内容。如需重新生成子分段内容，轻点 **“保存并重新生成子分段”**。
  </Tab>
</Tabs>

### 修改已上传文档的文本分段

已创建的知识库支持重新配置文档分段。

<Tabs>
  <Tab title="较大分段">
    - 可在单个分段内保留更多上下文，适合需要处理复杂或上下文相关任务的场景。
    - 分段数量减少，从而降低处理时间和存储需求。
  </Tab>
  <Tab title="较小分段">
    - 提供更高的粒度，适合精确提取或总结文本内容。
    - 减少超出模型 token 限制的风险，更适配限制严格的模型。
  </Tab>
</Tabs>

你可以访问 **分段设置**，点击 **保存并处理** 按钮以保存对分段设置的修改，并重新触发当前文档的分段流程。当你保存设置并完成嵌入处理后，文档的分段列表将自动更新。

![Chunk Settings](https://assets-docs.dify.ai/2025/01/36cb20be8aae1f368ebf501c0d579051.png)

***

### 元数据管理

如需了解元数据的相关信息，请参阅 [元数据](https://docs.dify.ai/zh-hans/guides/knowledge-base/metadata)。