---
title: Dify MCPプラグインガイド：Zapierへのワンクリック接続と自動メール送信
---

**このガイドでは** DifyワークスペースにMCP SSEプラグインをインストールし、ZapierのMCPサービスと連携するように設定することで、シームレスな自動メール送信ワークフローを実現する方法を解説します。

## プロジェクト背景

Anthropicは2024年末にMCP（モデルコンテキストプロトコル）をリリースしました。MCPは、AIのための「USB-C」インターフェースのように機能する新興のオープンプロトコルです。LLM（大規模言語モデル）と外部アプリケーション間に双方向の通信チャネルを構築し、モデルが様々な外部ツールやAPIを発見・理解し、呼び出すことを支援します。

これにより、開発者が外部サービスごとに複雑なカスタム統合を構築する必要がなくなります。ユーザーは、日常のオフィス業務処理、データ分析、マーケティングオートメーションの実行など、AIが膨大な数のサードパーティ製アプリを簡単に呼び出す能力を体験できます。AIは「インテリジェントな対話」から「効率的なアクション」へと進化を遂げつつあります。

DifyコミュニティにおいてもMCPは大きな注目を集めており、コミュニティ開発者はプラグインマーケットプレイスに複数のMCPプラグインを提供しています。これにより、外部のMCPサービスをDifyのエージェントアプリやワークフローに簡単に接続できるようになりました。

本ガイドでは、MCP SSEプラグインを例に、Dify内でMCPプラグインを使用してZapierに接続し、自動メール送信プロセスを完了する方法を詳しく説明します。

## 前提条件

- Dify クラウド版 / Dify コミュニティ版 ≥ v1.0.0
- Zapier アカウント

## Dify で Zapier MCP サービスを初期化する

Zapier の MCP Server は、7000以上のアプリと30,000以上のアクション（Action）を単一の MCP Server URL にまとめています。メール送信、CRMへのレコード作成、Slackでの通知送信など、必要なツールやアクションはZapierの管理画面で選択・設定可能です。このMCPサーバーURLをDifyのMCPプラグイン設定に入力するだけで、LLMは会話中やプロセス実行中にこれらのツールを自動的に呼び出し、様々なタスクを完了させることができます。

### ステップ1：Zapier MCP Server URL を取得する

1. [Zapier MCP 設定ページ](https://actions.zapier.com/settings/mcp/)にアクセスします。
2. MCP Server URL を取得し、後で Difyのプラグインの設定に使用します。

![](https://assets-docs.dify.ai/2025/04/15bba178b0adddcd3e1961807dfe14f0.png)

3. URL の下にある "Edit MCP Actions（MCPアクションを編集）" をクリックして、ツールとアクションの追加ページに移動します。

4. "Add a new action（新たなアクションを増加）" をクリックし、`Gmail: Send Email` を検索します。実際のニーズに応じて異なるメールアクションを選択することもできます。

![](https://assets-docs.dify.ai/2025/04/718e214166ca6eed6771d44f3b6ab718.png)

5. 「Send Email（メールを送る）」を例に説明します：

Gmail アカウントの下にある 「Connect（連結）」 をクリックし、Gmail アカウントにログインして認証します。

宛先（To）、件名（Subject）、本文（Body）などのフィールドについては、「Have AI guess a value for this field（このフィールドの値をAIに推測させる）」 を選択できます。具体的な内容は、エージェントが会話の文脈に基づいて動的に内容を生成します。

![](https://assets-docs.dify.ai/2025/04/637ce6b46ab706f4512a2dceb25a8162.png)

6. 設定完了後、さらに異なるアクションを追加して、エージェントが使用できるツールセットを充実させることができます。

### ステップ2：MCP SSE プラグインをインストールする

1. Difyプラグインマーケットプレイスで「MCP SSE」プラグインを検索・インストールしてください。

![](https://assets-docs.dify.ai/2025/04/20174032b8feb624a52ac36d65e7c0fa.png)

> 安定性を最優先する場合はプラグインバージョンv0.0.4の使用を推奨します。バージョンは詳細設定ページで変更可能。
> ![](https://assets-docs.dify.ai/2025/04/b076d40ea120dea544df49bc52199ad6.png)


2. プラグインページの「認証する」ボタンをクリックし、取得したZapier MCPサーバーURLを設定してください：

```json
{
  "server_name": {
    "url": "https://actions.zapier.com/mcp/*******/sse",
    "headers": {},
    "timeout": 5,
    "sse_read_timeout": 300
  }
}
```

![](https://assets-docs.dify.ai/2025/04/5ba078e8804c1bee5bcec167d260a92a.png)

### ステップ3：Difyエージェントアプリを作成し、MCP SSE サービスを有効にする

1. エージェントタイプのアプリを作成する

ナビゲーションから「ワークスタジオ」を選択し、アプリリストで「空白から作成」を選択してエージェントアプリタイプを選びます。アプリ名を入力して作成を完了します。

![](https://assets-docs.dify.ai/2025/04/aaef5e115211c2b04382552e537877fa.png)

2. MCP ツールを追加する

アプリツールバーで `Fetch MCP Tools` と `Call MCP Tool` をそれぞれ追加します。

![](https://assets-docs.dify.ai/2025/04/4e570e4e42720b3e202d409fa93f983a.png)

3. LLM を設定する

MCP の使用時には多くのトークンが消費される可能性があるため、よりコストパフォーマンスの高い LLM を使用することをお勧めします。このガイドでは、`deepseek-chat` モデルを例として使用します。[DeepSeek Platform](https://platform.deepseek.com/usage) で API キーを申請し、「設定」→「モデルプロバイダー」→「DeepSeek」に入力してください。

> モデルプロバイダーで DeepSeek モデルが見つからない場合は、Dify プラグインマーケットプレイスで DeepSeek プラグインをインストールしてください。

## 使用シナリオ1：MCP サービスを使用して単一のメールを自動送信する

設定が完了したら、エージェントとの会話を通じて、メールドラフトを自動生成し、指定した受信者に送信できます。

![](https://assets-docs.dify.ai/2025/04/fc76cc8e7dd7476199e9810fa5403f3b.png)

会話ボックスで LLM にメール送信タスクを完了するよう指示します。MCP の実行が完了すると、メールは自動的に受信者に送信されます。

![](https://assets-docs.dify.ai/2025/04/dc80a8fb00800e8938f3918fc908bc1b.png)

## 使用シナリオ2：ワークフローで MCPエージェントStrategy を設定する

MCP SSE プラグインをツールとしてエージェントに追加するだけでなく、ワークフローでも MCPエージェント戦略プラグインを使用できます。インストール完了後、対応するエージェントノード内で設定します。具体的な手順は以下の通りです：

![](https://assets-docs.dify.ai/2025/04/0a340d4cc4a549e6b7420b39cfd805d6.png)

以下の JSON 構造をテンプレートとして使用し、`url` の値を MCP Server アドレスに置き換えます。修正後の完全な JSON を `MCP SERVER URL` 設定ボックスにコピー＆ペーストします：

```json
{
  "server_name": {
    "url": "https://actions.zapier.com/mcp/*******/sse",
    "headers": {},
    "timeout": 5,
    "sse_read_timeout": 300
  }
}
```

![](https://assets-docs.dify.ai/2025/04/883c70b8a714c0c7e7a25f5f712c59e0.png)

設定完了後、ワークフローがこのエージェントノードに到達すると、プロンプト指示に従って、設定された Zapier MCP Server を利用してタスクを実行できます。下図のように、Gmail を呼び出してメールを送信します：

![](https://assets-docs.dify.ai/2025/04/a201fb50200737881e4ddc0b31518336.png)

{/*
Contributing Section
DO NOT edit this section!
It will be automatically generated by the script.
*/}

---

[このページを編集する](https://github.com/langgenius/dify-docs/edit/main/ja-jp/plugins/best-practice/how-to-use-mcp-zapier.mdx) | [問題を報告する](https://github.com/langgenius/dify-docs/issues/new?title=ドキュメントの問題%3A%20o-use-mcp-zap&body=%23%23%20問題の説明%0A%3C%21--%20発見した問題について簡単に説明してください%20--%3E%0A%0A%23%23%20ページリンク%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/plugins/best-practice%2Fhow-to-use-mcp-zapier.mdx%0A%0A%23%23%20提案される変更%0A%3C%21--%20特定の変更案がある場合は、ここで説明してください%20--%3E%0A%0A%3C%21--%20ドキュメントの品質向上にご協力いただきありがとうございます！%20--%3E)

