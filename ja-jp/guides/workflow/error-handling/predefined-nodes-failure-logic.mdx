---
title: 事前定義されたエラー処理ロジック
---


以下の4つのノードは、エラー状況に対応するためのロジックを構築する機能を提供しています：

* [LLM](/ja-jp/guides/workflow/nodes/llm)
* [HTTP](/ja-jp/guides/workflow/nodes/http-request)
* [コード](/ja-jp/guides/workflow/nodes/code)
* [ツール](/ja-jp/guides/workflow/nodes/tools)

エラー処理のためには、次の3つの事前に定義されたロジックオプションがあります：

* **処理なし**：エラーを処理せずに、ノードからのエラーメッセージをそのまま返し、フロー全体を停止します。
* **デフォルト値**：開発者がエラー情報をあらかじめ定義できるようにします。エラーが発生した場合、定義された値によって元のノードが返すエラー情報を置き換えます。
* **エラーブランチ**：エラーが発生した場合、あらかじめ設定されたエラー処理のブランチを実行します。

![エラー処理](https://assets-docs.dify.ai/2024/12/6e2655949889d4d162945d840d698649.png)

### 処理ロジック：処理なし

これはノードのエラー処理のデフォルト設定であり、タイムアウトやエラーが発生した場合には直接エラーメッセージをスローし、全体の処理フローを中断します。この場合、ワークフローアプリケーションは実行失敗として記録されます。

### 処理ロジック：デフォルト値

開発者はデフォルト値エディタを使用して、ノードのエラー出力情報をカスタマイズできます。これは、プログラミングにおけるステップバイステップ（逐次的な）デバッグに似ており、アプリケーションのデバッグプロセスをより明確にします。

例えば：
* `object`や`array`型には、直観的な`JSON`エディタを用意しています。
* `number`や`string`型には、それぞれの型に合わせたエディタを用意しています。

ノードの実行が失敗した場合、フローは自動的に開発者が設定したデフォルト値を使用し、オリジナルのエラー出力情報の代わりとして処理を続行します。これにより、より明確なエラーメッセージが得られ、開発者はアプリケーションのフローデザインの最適化に注力できます。

> デフォルト値のデータ構造は、ノードの出力変数と一致します。例えば、コードノードの出力変数をarray[number]データタイプに設定した場合、デフォルト値のデータタイプも同様にarray[number]になります。

![エラー処理：デフォルト値](https://assets-docs.dify.ai/2024/12/e9e5e757090679243e0c9976093c7e6c.png)

### 処理ロジック：エラーブランチ

現在のノードの実行でエラーが発生した場合、予め設定されたエラーブランチがトリガーされます。この選択を行うと、新たな接続点が現在のノードに追加され、開発者はキャンバス上で次の処理フローを構築するか、ノード詳細の右下隅で下流ノードを追加することができます。

> エラーブランチはオレンジ色の線で示されます。

![](https://assets-docs.dify.ai/2024/12/e5ea1af947818bd9e27cab3042c1c4f3.png)

一般的な戦略としては、エラーブランチ内でエラーに対応するノードを配置し、修正されたデータを変数集約ノードを介して元のフローにリンクし、結果を集約して出力します。例えば、メールツールノードを接続してエラー情報を送信することができます。

**エラー変数**

ノードのエラー処理を「デフォルト値」または「エラーブランチ」に設定した場合、エラー状況が発生すると、`error_type`および`error_message`といった変数を通じて下流ノードにエラー情報が伝えられます。

<table>
  <thead>
    <tr>
      <th>変数名</th>
      <th>説明</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>error_type</code></td>
      <td>エラーのタイプ。ノードの種類によって異なるエラータイプがあり、開発者はそれぞれのエラーに対して適切な対処法を選択できます。</td>
    </tr>
    <tr>
      <td><code>error_message</code></td>
      <td>具体的なエラーメッセージ。これはエラー発生元のノードが出力する詳細な障害情報であり、開発者はこれを利用してエラーを修正したり、メールツールを通じて情報を送信したりできます。</td>
    </tr>
  </tbody>
</table>

{/*
Contributing Section
DO NOT edit this section!
It will be automatically generated by the script.
*/}

<CardGroup cols="2">
    <Card
        title="このページを編集する"
        icon="pen-to-square"
        href="https://github.com/langgenius/dify-docs/edit/main/ja-jp/guides/workflow/error-handling/predefined-nodes-failure-logic.mdx"
    >
        直接貢献することでドキュメントの改善にご協力ください
    </Card>
    <Card
        title="問題を報告する"
        icon="github"
        href="https://github.com/langgenius/dify-docs/issues/new?title=ドキュメントの問題%3A%20fined-nodes-failure-lo&body=%23%23%20問題の説明%0A%3C%21--%20発見した問題について簡単に説明してください%20--%3E%0A%0A%23%23%20ページリンク%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fja-jp/guides/workflow/error-handling%2Fpredefined-nodes-failure-logic.mdx%0A%0A%23%23%20提案される変更%0A%3C%21--%20特定の変更案がある場合は、ここで説明してください%20--%3E%0A%0A%3C%21--%20ドキュメントの品質向上にご協力いただきありがとうございます！%20--%3E"
    >
        エラーを見つけたり提案がありますか？お知らせください
    </Card>
</CardGroup>
