---
title: 繰り返し処理（ループ）
---

## 概要

繰り返し処理（ループ）ノードは、前回の結果に依存する反復タスクを実行し、終了条件を満たすか最大繰り返し回数に達するまで継続します。

## 繰り返し処理ノードと反復処理ノードの違い

<table>
  <thead>
    <tr>
      <th>タイプ</th>
      <th>特徴</th>
      <th>用途</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>繰り返し処理（ループ）</strong></td>
      <td>各回の処理が前回の結果に依存する。</td>
      <td>再帰処理や最適化問題など、前回の計算結果を必要とする処理に適している。</td>
    </tr>
    <tr>
      <td><strong>反復処理（イテレーション）</strong></td>
      <td>各回の処理は独立しており、前回の結果に依存しない。</td>
      <td>データの一括処理など、各処理を独立して実行できるタスクに適している。</td>
    </tr>
  </tbody>
</table>

## 繰り返し処理（ループ）ノードの設定方法

<table>
  <thead>
    <tr>
      <th>パラメータ</th>
      <th>説明</th>
      <th>例</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ループ終了条件</td>
      <td>ループを終了するタイミングを決定する式</td>
      <td><code>x < 50</code>、<code>error_rate < 0.01</code></td>
    </tr>
    <tr>
      <td>最大繰り返し回数（Maximum Loop Count）</td>
      <td>無限ループを防ぐための繰り返し回数の上限</td>
      <td>10、100、1000</td>
    </tr>
  </tbody>
</table>

<img 
  src="https://assets-docs.dify.ai/2025/03/13853bfaaa068cdbdeba1b1f75d482f2.png" 
  className="mx-auto" 
  alt="ループノードの設定画面"
/>

## 使用例

**目標：50未満の値が出るまで、1から100までのランダムな数値を生成する。**

**実装手順**：

1. `code`ノードを使用して1-100の間のランダムな数値を生成します。

2. `if`ノードを使用して数値を評価します：
   - 50未満の場合：`done`を出力してループを終了します。
   - 50以上の場合：ループを継続し、別のランダムな数値を生成します。

3. ループ終了条件を「ランダム数値 < 50」に設定します。

4. 50未満の数値が出現したらループは自動的に終了します。

<img 
  src="https://assets-docs.dify.ai/2025/03/b1c277001fc3cb1fbb85fe7c22a6d0fc.png" 
  className="mx-auto" 
  alt="ループノードの使用例"
/>

## 今後の拡張

**今後のリリースには以下の機能が追加される予定です：**

- ループ変数：繰り返し間で値を保存・参照できるようにし、状態管理と条件付きロジックを強化します。

- `break`ノード：実行パス内からループを直接終了できるようにし、より高度な制御フローパターンを実現します。