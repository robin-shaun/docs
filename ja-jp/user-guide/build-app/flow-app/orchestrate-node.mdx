---
title: オーケストレートノード
version: '日本語'
---

チャットフローおよびワークフローアプリケーションは、ビジュアルなドラッグアンドドロップ機能を通じてノードのオーケストレーションをサポートしており、**シリアル**および**パラレル**の2つのオーケストレーションデザインパターンがあります。

<Frame caption="上の画像はシリアル構造のノードフロー、下のはパラレル構造のノードフロー">
  <img src="/ja-jp/img/orchestrate-node.jpeg" alt="串行和并行节点流对比图" />
</Frame>

## シリアルノードのデザインパターン

このパターンでは、ノードはあらかじめ定義された順序で順次実行されます。各ノードは、前のノードがタスクを完了し、出力を生成した後にのみ操作を開始します。これにより、**タスクが論理的な順序で実行されることが保証されます**。

シリアルパターンを実装した「小説生成」ワークフローアプリケーションを考えてみましょう。ユーザーが小説のスタイル、リズム、キャラクターを入力した後、LLMが順番に小説の概要、プロット、エンディングを完成させます。各ノードは前のノードの出力に基づいて動作し、小説のスタイルに一貫性をもたらします。

### シリアル構造の作り方

1. 2つのノードの間にある「+」アイコンをクリックして新しいシリアルノードを挿入します。
2. ノードを順次リンクします。
3. すべてのパスを「End」ノードに収束させて、ワークフローを最終承認します。

<Frame caption="シリアル構造">
  <img src="/ja-jp/img/orchestrate-node-serial-design.png" alt="串行结构设计示意图" />
</Frame>

### シリアル構造のアプリのログをチェックする

シリアル構造のアプリは、ログが順次ノードの操作を表示します。会話ボックスの右上にある "View Logs - Tracing" を順にクリックすると、各ノードの入力、出力、トークン消費、実行時間を含む完全なワークフロープロセスが表示されます。

<Frame caption="シリアル構造のアプリのログ">
  <img src="/ja-jp/img/viewing-serial-structure-app-logs.png" alt="串行结构应用日志界面" />
</Frame>

## パラレルノードのデザインパターン

このアーキテクチャパターンは、複数のノードを並行して実行することを可能にします。前のノードは、パラレル構造内の複数のノードを同時にトリガーできます。これらのパラレルノードは独立して動作し、タスクを同時に実行することで、全体のワークフロー効率を大幅に向上させます。

パラレルアーキテクチャを実装した翻訳ワークフローアプリケーションを考えてみましょう。ユーザーがソーステキストを入力してワークフローをトリガーすると、パラレル構造内のすべてのノードが前のノードから同時に命令を受け取ります。これにより、複数の言語への同時翻訳が可能となり、全体の処理時間が大幅に短縮されます。

<Frame caption="パラレルノードのデザイン">
  <img src="/ja-jp/user-guide/.gitbook/assets/image (335).png" alt="并行设计示意图" />
</Frame>

### パラレルノードのデザインパターン

次の4つの方法は、ノードの追加やビジュアル操作を通じてパラレル構造を作成する方法を示しています：

**方法1**

ノードの上にカーソルを合わせると「+」ボタンが表示されます。クリックすると、複数のノードが追加され、自動的にパラレル構造が形成されます。

<Frame caption="Type 01">
  <img src="/ja-jp/img/orchestrate-node-parallel-design-method-1.png" alt="新建并行结构方式1" />
</Frame>

**方法2**

ノードから接続を延長するには、ノードの「+」ボタンをドラッグしてパラレル構造を作成します。

<Frame caption="Type 02">
  <img src="/ja-jp/img/orchestrate-node-parallel-design-method-2.png" alt="新建并行结构方式2" />
</Frame>

**方法3**

キャンバス上に複数のノードがある場合は、ビジュアルにドラッグしてリンクし、パラレル構造を形成します。

<Frame caption="Type 03">
  <img src="/ja-jp/img/orchestrate-node-parallel-design-method-3.png" alt="新建并行结构方式3" />
</Frame>

**方法4**

キャンバスベースの方法に加えて、ノードの右側パネルの「Next Step」セクションからノードを追加することで、パラレル構造を生成することもできます。このアプローチにより、自動的にパラレル構成が作成されます。

<Frame caption="Type 04">
  <img src="/ja-jp/img/orchestrate-node-parallel-design-method-4.png" alt="新建并行结构方式4" />
</Frame>

<Note>
**Tips：**

* 任意のノードがパラレル構造の下流ノードとして機能します。
* ワークフローアプリケーションには、単一かつ一意な「end」ノードが必要です。
* チャットフローアプリケーションでは複数の「answer」ノードがサポートされます。これらのアプリケーションの各パラレル構造は、適切なコンテンツの出力を確保するために「answer」ノードで終了する必要があります。
* すべてのパラレル構造は同時に実行されます。パラレル構造内のノードは、タスクを完了した後に結果を出力し、出力には順序関係がありません。パラレル構造が単純であればあるほど、結果の出力が速くなります。
</Note>

<Frame caption="チャットフローアプリ中のパラレル構造">
  <img src="/ja-jp/img/orchestrate-node-chatflow-multi-answer.png" alt="Chatflow 应用中的并行结构示例" />
</Frame>

### パラレル構造の作り方

以下の4つのパターンは、一般的なパラレル構造デザインを示しています：

#### 1. 通常のパラレル

通常のパラレルは、「開始 | パラレルノード | 終了」の3階層関係を指します。この構造は直感的で、ユーザー入力後に複数のタスクを同時に実行できます。

> パラレルブランチの上限は10です。

<Frame caption="通常のパラレル">
  <img src="/ja-jp/img/orchestrate-node-simple-parallel.png" alt="普通并行结构示例" />
</Frame>

#### 2. ネストされたパラレル

ネストされたパラレルは、「開始 | 複数のパラレル構造 | 終了」の多階層関係を指します。これは、外部APIを要求する必要があるノード内で同時に複数のタスクを処理し、結果を下流ノードに渡す必要があるような、より複雑なワークフローに適しています。

ワークフローは、最大3層までのネスト関係をサポートします。

<Frame caption="ネストされたパラレル">
  <img src="/ja-jp/img/orchestrate-node-nested-parallel.png" alt="嵌套并行结构示例" />
</Frame>

#### 3. 条件分岐 + パラレル

パラレル構造は条件分岐と組み合わせて使用することもできます。

<Frame caption="条件分岐 + パラレル">
  <img src="/ja-jp/img/orchestrate-node-conditional-branch-parallel.png" alt="条件分支和并行结构结合示例" />
</Frame>

#### 4. イテレーション + パラレル

このパターンは、イテレーションとパラレル構造を組み合わせたものです。

<Frame caption="イテレーション + パラレル">
  <img src="/ja-jp/img/orchestrate-node-iteration-parallel.png" alt="迭代分支和并行结构结合示例" />
</Frame>

### パラレル構造のアプリのログをチェックする

パラレル構造をもつアプリケーションは、ツリーのような形式でログを生成します。折りたたみ可能なパラレルノード グループにより、個々のノード ログを簡単に表示できます。

<Frame caption="パラレル構造のアプリのログ" width="315">
  <img src="/ja-jp/img/orchestrate-node-parallel-logs.png" alt="并行结构应用日志界面" />
</Frame>