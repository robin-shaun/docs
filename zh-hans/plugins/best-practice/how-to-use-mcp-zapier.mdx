---
title: Dify MCP 插件指南：一键连接 Zapier 并自动发送邮件
---

**本文将帮助你：**

为 Dify 工作空间安装 MCP SSE 插件，远程调用 Zapier MCP 服务以实现自动发送邮件。

## 项目背景

Anthropic 于 2024 年底推出了模型上下文协议（MCP）。作为一项新兴的开放协议，MCP 为 LLM 与外部应用之间构建了双向通信通道，就像是 AI 的“USB-C”接口，帮助模型发现、理解并安全调用各种外部工具或 API。

这意味着：开发者不再需要为对接每一个外部服务而编写复杂的定制接口。用户可以体验到 AI 轻松调用海量第三方应用的能力，无论是处理日常办公任务、分析数据，还是执行营销自动化，AI 正从“智能对话”迈向“高效行动”。

在 Dify 社区里，MCP 同样备受关注。社区开发者在插件市场贡献了多个 MCP 插件，你可以轻松地通过插件将外部 MCP 服务接入至 Dify Agent 应用或工作流中。

本文将以 MCP SSE 插件为例，详细介绍如何在 Dify 内使用 MCP 插件连接 Zapier 并完成自动邮件发送流程。

## 前置准备

- Dify 云端版 / Dify 社区版 ≥ v1.0.0
- Zapier 账号

## 在 Dify 中初始化 Zapier MCP 服务

Zapier 的 MCP Server 将其已有的 7000+ 应用和 30,000+ 操作（Action）统一封装到了一个 MCP Server URL 中。你可以在 Zapier 后台，自主选择和配置需要的工具及操作，比如发邮件、在 CRM 中创建记录、在 Slack 中发送通知等。只需将 MCP Server URL 填入 Dify MCP 插件的配置，就能让 LLM 在对话或流程中，自动调用这些工具完成各类任务。

### 步骤一：申请 Zapier MCP Server URL

1. 访问 [Zapier MCP 设置页面](https://actions.zapier.com/settings/mcp/)。
2. 获取 MCP Server URL，稍后填写至 Dify 的插件配置。

![](https://assets-docs.dify.ai/2025/04/15bba178b0adddcd3e1961807dfe14f0.png)

3. 点击 URL 下方的 “Edit MCP Actions”，进入工具和操作的添加页面。

4. 点击 “Add a new action”，搜索 `Gmail: Send Email`。你也可以根据实际需求选择添加不同的邮件操作。

![](https://assets-docs.dify.ai/2025/04/718e214166ca6eed6771d44f3b6ab718.png)

5. 以“发送邮件”为例：

在 Gmail 账户下方点击 “Connect”，然后登录并授权你的 Gmail 邮箱。

对于邮件的收件人 (To)、主题 (Subject) 和正文 (Body) 等字段，可以选择 “Have AI guess a value for this field” ，具体内容将由 Agent 根据实际对话和场景动态决定。

![](https://assets-docs.dify.ai/2025/04/637ce6b46ab706f4512a2dceb25a8162.png)

6. 设置完成后，你还可以继续添加不同的 Action，丰富 Agent 可用的工具集。

### 步骤二：安装 MCP SSE 插件

1. 前往 Dify 插件市场，搜索 MCP SSE 插件并点击安装。

![](https://assets-docs.dify.ai/2025/04/20174032b8feb624a52ac36d65e7c0fa.png)

> 为确保服务稳定，建议使用 v0.0.4 插件版本；你可以在工作空间内的插件详情页调整版本。
> ![](https://assets-docs.dify.ai/2025/04/b076d40ea120dea544df49bc52199ad6.png)


2. 点击插件页的 To Authorize 按钮，将上文中获取的 Zapier MCP Server URL 粘贴至插件内。地址格式参考：

```json
{
  "server_name": {
    "url": "https://actions.zapier.com/mcp/*******/sse",
    "headers": {},
    "timeout": 5,
    "sse_read_timeout": 300
  }
}
```

![](https://assets-docs.dify.ai/2025/04/5ba078e8804c1bee5bcec167d260a92a.png)

### 步骤三：创建 Dify Agent 应用并启用 MCP SSE 服务

1. 创建 Agent 类型应用

从导航选择 「工作室」，在应用列表内选择 「从空白创建」 并选择 Agent 应用类型，填写应用名称后完成创建。

![](https://assets-docs.dify.ai/2025/04/aaef5e115211c2b04382552e537877fa.png)

2. 添加 MCP 工具

在应用工具栏中分别添加 `Fetch MCP Tools` 和 `Call MCP Tool`。

![](https://assets-docs.dify.ai/2025/04/4e570e4e42720b3e202d409fa93f983a.png)

3. 配置 LLM

使用 MCP 时可能会消耗大量 Tokens，因此建议使用更具性价比的 LLM。本文将以 `deepseek-chat` 模型为例。你可以前往 [DeepSeek Platform](https://platform.deepseek.com/usage) 申请 API Key 并将其填写至 「设置」 → 「模型供应商」 → 「DeepSeek」内。

> 若你并未在模型供应商内检索到 DeepSeek 模型，请前往 Dify 插件市场安装 DeepSeek 插件。

## 使用场景一：使用 MCP 服务自动发送单条邮件

配置完成后，只需通过与 Agent 对话，即可自动生成邮件草稿，并发送给指定收件人。

![](https://assets-docs.dify.ai/2025/04/fc76cc8e7dd7476199e9810fa5403f3b.png)

在对话框内要求 LLM 完成邮件发送任务。等待 MCP 运行完成后，邮件将自动发送至收件人。

![](https://assets-docs.dify.ai/2025/04/dc80a8fb00800e8938f3918fc908bc1b.png)

## 使用场景二：在 Workflow 中配置 MCP Agent Strategy

除了将 MCP SSE 插件作为工具添加到 Agent 外，你还可以在 Workflow 中使用 MCP Agent Strategy 插件。安装完成后，在对应的 Agent 节点内进行配置，具体操作如下：

![](https://assets-docs.dify.ai/2025/04/0a340d4cc4a549e6b7420b39cfd805d6.png)

将以下 JSON 结构作为模板，其中 `url` 值替换为 MCP Server 地址，然后将修改后的完整 JSON，复制粘贴到 `MCP SERVER URL` 配置框内：

```json
{
  "server_name": {
    "url": "https://actions.zapier.com/mcp/*******/sse",
    "headers": {},
    "timeout": 5,
    "sse_read_timeout": 300
  }
}
```

![](https://assets-docs.dify.ai/2025/04/883c70b8a714c0c7e7a25f5f712c59e0.png)

配置完成后，当 Workflow 运行到该 Agent 节点时，就能够根据 Prompt 指令，利用配置好的 Zapier MCP Server 来执行任务。如下图所示，调用 Gmail 发送邮件：

![](https://assets-docs.dify.ai/2025/04/a201fb50200737881e4ddc0b31518336.png)

{/*
Contributing Section
DO NOT edit this section!
It will be automatically generated by the script.
*/}

---

[编辑此页面](https://github.com/langgenius/dify-docs/edit/main/zh-hans/plugins/best-practice/how-to-use-mcp-zapier.mdx) | [提交问题](https://github.com/langgenius/dify-docs/issues/new?title=文档问题%3A%20o-use-mcp-zap&body=%23%23%20问题描述%0A%3C%21--%20请简要描述您发现的问题%20--%3E%0A%0A%23%23%20页面链接%0Ahttps%3A%2F%2Fgithub.com%2Flanggenius%2Fdify-docs%2Fblob%2Fmain%2Fzh-hans/plugins/best-practice%2Fhow-to-use-mcp-zapier.mdx%0A%0A%23%23%20建议修改%0A%3C%21--%20如果有具体的修改建议，请在此说明%20--%3E%0A%0A%3C%21--%20感谢您对文档质量的关注！%20--%3E)

