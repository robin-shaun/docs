---
title: 持久化存储
---



{/* 
  贡献者注意:
  ----------------
  本文档为旧版文档，即将弃用。
  请勿对此版本进行更改。
  所有更新应指向新版本：
  /plugin-dev-zh/0411-persistent-storage-kv
*/}

<Card title="本文档即将弃用" icon="circle-exclamation" href="/plugin-dev-zh/0411-persistent-storage-kv">
  <p>作为我们文档重组的一部分，此页面正在逐步淘汰。</p>
  
  <p><u><b>点击此卡片</b></u>跳转到包含最新信息的更新版本。</p>
  
  <p>如果您在新的文档中发现任何差异或需要改进的地方，请使用页面底部的“报告问题”按钮。</p>
</Card>

如果单独审视插件中的 Tool 及 Endpoint，不难发现大多数情况下其只能完成单轮交互，请求后返回数据，任务结束。

如果有需要长期储存的数据，如实现持久化的记忆，需要插件具备持久化存储能力。**持久化储机制能够让插件具备在相同 Workspace 持久存储数据的能力**，目前通过提供 KV 数据库满足存储需求，未来可能会根据实际的使用情况推出更灵活更强大的储存接口。

### 储存 Key

#### **入口**

```python
    self.session.storage
```

#### **接口**

```python
    def set(self, key: str, val: bytes) -> None:
        pass
```

可以注意到传入的是一个 bytes，因此实际上你可以在其中储存文件。

### 获取 Key

#### **入口**

```python
    self.session.storage
```

#### **接口**

```python
    def get(self, key: str) -> bytes:
        pass
```

### 删除 Key

#### **入口**

```python
    self.session.storage
```

#### **接口**

```python
    def delete(self, key: str) -> None:
        pass
```

{/*
Contributing Section
DO NOT edit this section!
It will be automatically generated by the script.
*/}

---

[编辑此页面](https://github.com/langgenius/dify-docs/edit/main/zh-hans/plugins/schema-definition/persistent-storage.mdx) | [提交问题](https://github.com/langgenius/dify-docs/issues/new?template=docs.yml)

