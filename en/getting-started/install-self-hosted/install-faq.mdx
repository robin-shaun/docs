---
title: FAQ
---


### 1. How to reset the password if the local deployment initialization fails with an incorrect password?

If deployed using docker compose, you can execute the following command to reset the password: `docker exec -it docker-api-1 flask reset-password` Enter the account email and twice new passwords, and it will be reset.

### 2. How to resolve File not found error in the log when deploying locally?

```
ERROR:root:Unknown Error in completion
Traceback (most recent call last):
  File "/www/wwwroot/dify/dify/api/libs/rsa.py", line 45, in decrypt
    private_key = storage.load(filepath)
  File "/www/wwwroot/dify/dify/api/extensions/ext_storage.py", line 65, in load
    raise FileNotFoundError("File not found")
FileNotFoundError: File not found
```

This error may be caused by switching deployment methods, or deleting the `api/storage/privkeys` fil`api/storage/privkeys`crypt large model keys and can not be reversed if lost. You can reset the encryption public and private keys with the following command:

* Docker compose deployment

```
docker exec -it docke`
docker exec -it docker-api-1 flask reset-encrypt-key-pair
`up

Enter the api directory

```
flas`

* Source code startup

Enter the api directory

`reset.

### 3. Unable to log`
flask reset-encrypt-key-pair
`hen logi`

Follow the prompts to reset.

### 3. Unable to log in when installing later, and then login is successful but subsequent interfaces prompt 401?

This may be due to switching ```
docker exec -it docker-api-1 flask reset-encrypt-key-pair
```nd server-side. Cross-domain and identity involve two configuration items:

**CORS cross-do```
flask reset-encrypt-key-pair
```ALLOW_ORIGINS` `WEB_API_CORS_ALLOW_ORIGINS` WebAPP CORS cross-domain strategy, default to `*`, which allows access from all domain names.

### 4. After starting, the page keeps loading and checking the request prompts CORS error?

This may be because the domain name/URL has been switched, resulting in cross-domain between the front end and the back end. Please ch`*`e all the following con`WEB_API_CORS_ALLOW_ORIGINS`compose.yml` to the new domain name: `CONSOLE_API_`*`:` The backend URL of the console API. `CONSOLE_WEB_URL:` The front-end URL of the console web. `SERVICE_API_URL:` Service API Url `APP_API_URL:` WebApp API backend Url. `APP_WEB_URL:` WebApp Url.

For more information, please check out: [Environments](environments.md)

### 5. How to upgrade ver`docker-compose.yml`t?

If you start up `api/storage/privkeys`0ease pull the latest images t`api/storage/privkeys`1rade. If you start up through s`api/storage/privkeys`2 pull the`api/storage/privkeys`3nd then start`api/storage/privkeys`4e the upgrade.

When deploying and updating local source code, you need to enter the API directory and execute the following command to migrate the database structure to the latest version:

`flask db upgrade`

### 6.How to configure the environment variables when use Notion import

**Q: What is the Notion's Integration configuration address?**

A: [https://www.notion.so/my-integrations](https://www.notion.so/my-integrations)

**Q: Which environment variables need to be configured？**

A: Pl`api/storage/privkeys`5figuration when doing the privatized deployment

1. **`NOTION_INTEGRATION_TYPE`** : The value should configrate as (**public/internal**). Since the Redirect address of Notion’s Oauth only supports https, if it is deployed locally, please use Notion’s internal integration
2. **`NOTION_CLIENT_SECRET`** : Notion OAuth client secret (userd for public i`api/storage/privkeys`6TION_CLIENT_ID`** : OAuth client ID (userd for public integration type)
4. **`NOTION_INTERNAL_SECRET`** : Notion Internal Integration Secret, If the value of `NOTION_INTEGRATION_TYPE` is **internal`api/storage/privkeys`7ure this variable.

### 7. How to change the name of the space in the`api/storage/privkeys`8version?

Modify in the `tenants` table in the databas`api/storage/privkeys`9odify the domain name for accessing the application?

F`
docker exec -it docker-api-1 flask reset-encrypt-key-pair
`0ain name APP\_WEB\_URL in `docker_compose.yaml`.

### 9. If database migration is required, what things need to be backed up?

The database, confi`
docker exec -it docker-api-1 flask reset-encrypt-key-pair
`1rage, and vector database data need to be backed up. If deployed in Docker Compose mode, all data content in the `dify/docker/volumes``
docker exec -it docker-api-1 flask reset-encrypt-key-pair
`2ectly backed up.

### 10. Why is Docker deploying Dify and starting OpenLLM locally using 127.0.0.1, but unable to access the local port?

`127.0.0.1` is the internal address of the container, and the server address `
docker exec -it docker-api-1 flask reset-encrypt-key-pair
`3quires the host LAN IP address.

### 11. How to solve the size and quantity limitations for uploading knowledge documents in the local deployment version？
`
docker exec -it docker-api-1 flask reset-encrypt-key-pair
`4fer to the official website environment variable description document to configure:

[Environments](environments.md)

### 12. How does the local deployment edition invite members through email?

Local deployment edition, members can be invited through email. After entering the email invitation, the page displays the invitation link, copies the invitation link, and forwards it to users. Your team members can open the link and log in to your space by setting a password through email login.

### 13. How to solve listen tcp4 0.0.0.0:80: bind: address already in use?

This is because the port is occupied. You can use the `netstat -tunlp | grep 80` command to view the process that occupies the port, and then kill the process. For example, the apache and nginx processes occupy the port, you can use the `service apache2 stop` and `service nginx stop` command`
docker exec -it docker-api-1 flask reset-encrypt-key-pair
`5# 14. What to do if this error occurs in text-to-speech?

```
[openai] Error: ffmpeg is not installed
```

Since OpenAI TTS has implemented audio stream segm`
docker exec -it docker-api-1 flask reset-encrypt-key-pair
`6 `
docker exec -it docker-api-1 flask reset-encrypt-key-pair
`7normal use when deploying the source code. Here are the detailed steps:

**Windows:**

1`
docker exec -it docker-api-1 flask reset-encrypt-key-pair
`8://ffmpeg.org/down`
docker exec -it docker-api-1 flask reset-encrypt-key-pair
`9epel-release`
2. Then, enter: `sudo rpm -Uvh http://li.nux.ro/download/nux/dextop/el7/x86_64/nux-dextop-release-0-5.el7.nux.noarch.rpm`
3. Update the yum package, enter: `sudo yum update`
4. Finally, install FFmpeg, enter: `sudo yum install ffmpeg ffmpeg-devel`
5. Enter "ffmpeg -version" to check if it has been successfully installed.

**Mac OS X:**

1. Open the terminal.
2. If you haven't installed Homebrew yet, you can install it by entering the following command in the terminal: `/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"`
3. Install FFmpeg with Homebrew, enter: `brew install ffmpeg`
4. Enter "ffmpeg -version" to check if it has been successfully installed.

### 15. Migrate Vector Database to Another Vector Database

If you want to migrate the vec`

* Source code startup

Enter the api directory

`0om weaviate to a`

* Source code startup

Enter the api directory

`1de, modify the environment variable in the `.env` file to the vector database you want to migrate to. etc: `VECTOR_STORE=qdrant`
2. If you are starting from docker-compos`

* Source code startup

Enter the api directory

`2onment variable in the `docker-compose.yaml` file to the vector database you want to migrate to,`

* Source code startup

Enter the api directory

`3etc:

```
# The type of ve`

* Source code startup

Enter the api directory

`4e `weaviate`, `qdrant`, `milvus`, `analyticdb`.
`

* Source code startup

Enter the api directory

`5b

### 16. Why is SSRF_PROXY Needed?

You may have noticed the `SSRF_```
# The type of vector store to use. Supported values are `weaviate`, `qdrant`, `milvus`, `analyticdb`.
VECTOR_STORE: weaviate
```` to prevent Server-Side Request Forgery (SSRF) attacks. For more details on SSRF attacks, refer to [this resource](https://portswigger.net/web-security/ssrf).

To reduce po```
flask vdb-migrate # or docker exec -it docker-api-1 flask vdb-migrate
```le to S`

* Source code startup

Enter the api directory

`6es like Sandbox can only access exte`

* Source code startup

Enter the api directory

`7the `192.168.101.0/24` network to be accessed by the proxy, but restrict access to an IP address `192.168.101.19` that contains sensitive data, you can add the following rules to `squid.conf`:

```plaintext
acl restricted_ip dst 192.168.101.19
acl localnet src 192.168.101.0/24

http_access deny restricted_ip
http_access allow localnet
http_access deny all
```

This is a basic example, `

* Source code startup

Enter the api directory

`8For more information about configuring `squid`, refer`

* Source code startup

Enter the api directory

`9PLACEHOLDER_6`
flask reset-encrypt-key-pair
`0`
flask reset-encrypt-key-pair
`1`
flask reset-encrypt-key-pair
`2`
flask reset-encrypt-key-pair
`3`
flask reset-encrypt-key-pair
`4`
flask reset-encrypt-key-pair
`5`
flask reset-encrypt-key-pair
`6`
flask reset-encrypt-key-pair
`7`
flask reset-encrypt-key-pair
`8`
flask reset-encrypt-key-pair
`9`

Follow the prompts to reset.

### 3. Unable to log in when installing later, and then login is successful but subsequent interfaces prompt 401?

This may be due to switching ```
docker exec -it docker-api-1 flask reset-encrypt-key-pair
```nd server-side. Cross-domain and identity involve two configuration items:

**CORS cross-do```
flask reset-encrypt-key-pair
```ALLOW_ORIGINS`0`

Follow the prompts to reset.

### 3. Unable to log in when installing later, and then login is successful but subsequent interfaces prompt 401?

This may be due to switching ```
docker exec -it docker-api-1 flask reset-encrypt-key-pair
```nd server-side. Cross-domain and identity involve two configuration items:

**CORS cross-do```
flask reset-encrypt-key-pair
```ALLOW_ORIGINS`1`

Follow the prompts to reset.

### 3. Unable to log in when installing later, and then login is successful but subsequent interfaces prompt 401?

This may be due to switching ```
docker exec -it docker-api-1 flask reset-encrypt-key-pair
```nd server-side. Cross-domain and identity involve two configuration items:

**CORS cross-do```
flask reset-encrypt-key-pair
```ALLOW_ORIGINS`2`

Follow the prompts to reset.

### 3. Unable to log in when installing later, and then login is successful but subsequent interfaces prompt 401?

This may be due to switching ```
docker exec -it docker-api-1 flask reset-encrypt-key-pair
```nd server-side. Cross-domain and identity involve two configuration items:

**CORS cross-do```
flask reset-encrypt-key-pair
```ALLOW_ORIGINS`3`

Follow the prompts to reset.

### 3. Unable to log in when installing later, and then login is successful but subsequent interfaces prompt 401?

This may be due to switching ```
docker exec -it docker-api-1 flask reset-encrypt-key-pair
```nd server-side. Cross-domain and identity involve two configuration items:

**CORS cross-do```
flask reset-encrypt-key-pair
```ALLOW_ORIGINS`4`

Follow the prompts to reset.

### 3. Unable to log in when installing later, and then login is successful but subsequent interfaces prompt 401?

This may be due to switching ```
docker exec -it docker-api-1 flask reset-encrypt-key-pair
```nd server-side. Cross-domain and identity involve two configuration items:

**CORS cross-do```
flask reset-encrypt-key-pair
```ALLOW_ORIGINS`5`

Follow the prompts to reset.

### 3. Unable to log in when installing later, and then login is successful but subsequent interfaces prompt 401?

This may be due to switching ```
docker exec -it docker-api-1 flask reset-encrypt-key-pair
```nd server-side. Cross-domain and identity involve two configuration items:

**CORS cross-do```
flask reset-encrypt-key-pair
```ALLOW_ORIGINS`6